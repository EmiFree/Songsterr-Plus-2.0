import{b$ as t}from"./index.b0563877.js";import{b as e,c as a}from"./user.9b07dcdf.js";async function n(){window.__INITIALIZED_GAPI__||(await t("https://apis.google.com/js/client.js","__LOADED_GAPI__"),await new Promise((t,e)=>{if(!window.gapi)return e(Error("No window.gapi"));window.gapi.load("client:auth2",{callback(){setTimeout(function(){if(!window.gapi||!window.gapi.client)return e(Error("No window.gapi.client"));window.__INITIALIZED_GAPI__=!0,window.gapi.client.init({clientId:window.__GOOGLE_CLIENT_ID__,scope:"profile email"}).then(t,e)},1)},onerror:e})}))}async function i(){try{await n()}catch(t){"idpiframe_initialization_failed"!==t.error&&console.error(t)}}async function r(){await n();let t=window.gapi;await t.auth2.getAuthInstance().signIn();let a=t.auth2.getAuthInstance().currentUser.get(),i=a.getAuthResponse().id_token;return e(i)}let c="Oops, something went wrong. Please try again later";function s(t){if(!(t instanceof Error)&&t.error)switch(t.error.toLowerCase()){case"popup_closed_by_user":return null;case"idpiframe_initialization_failed":return t.details?Error(t.details):Error(c);case"popup_blocked_by_browser":return Error("Pop-up blocked by browser. Please try again");case"access_denied":return Error("Access was not granted. Please try again");default:return Error(c)}return t}async function o(){try{await n();let t=window.gapi;t.auth2.getAuthInstance().isSignedIn.get()&&await t.auth2.getAuthInstance().signOut()}catch(e){}}async function u(){await a();try{await n();let t=window.gapi;t.auth2.getAuthInstance().isSignedIn.get()&&t.auth2.getAuthInstance().currentUser.get().disconnect()}catch(e){}}export{r as a,o as b,u as c,i as g,s as s}