import{H as e,I as t,c2 as s,_ as a,L as r,T as i}from"./index.3637aaf7.js";import{a as o,v as c}from"./preact.f8a34c73.js";import{n}from"./ActionButton.e7edc72b.js";import{x as l}from"./FormError.ba736668.js";import{w as p}from"./Panel.4e04b14d.js";import{o as u}from"./GenericPanel.module.38dde225.js";import{c as m,o as d}from"./ContinueLink.d187aeb8.js";const h="I'm sure, cancel my subscription";var f=e(class extends o{constructor(e){super(e),t(this,"cancelSubscription",(async e=>{e.preventDefault();try{this.setState({processing:!0,error:null});let e=this.props.user.profile;e&&e.isLegacyPayPal||(e=await s()),this.props.dispatch("user/cancelPlus",e),this.setState({processing:!1,error:null,next:!0})}catch(e){this.props.dispatch("curiosity/error",{error:"Subscription",message:e.message}),this.setState({processing:!1,error:e})}})),t(this,"cancelPayPal",(()=>{this.setState({next:!0})})),this.state={error:null,processing:!1,next:!1}}render(){const e=c(m,{key:"cancel",className:u.section,"data-section":"form"},c("h4",{className:u.title},"Are you sure you want to cancel your subscription?"),c("form",{noValidate:!0,onSubmit:this.cancelSubscription},c(l,{error:this.state.error}),c("div",{className:u.actions},this.props.user.profile.isLegacyPayPal?c("a",{target:"_blank",onClick:this.cancelPayPal,href:"https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-find&alias=F6Q2JNH34XCCG",className:a.buttonGreen,"data-action":"cancelPayPal"},h):c(n,{id:"confirmCancelation",title:h,processing:this.state.processing}),c(r,{to:"/a/wa/account",className:a.buttonLink,"data-action":"cancel"},"No, keep it")))),t=c(m,{key:"done",className:u.section,"data-section":"done"},c("h4",{className:u.title},this.props.user.profile.isLegacyPayPal?"Your Sonsgterr Plus subscription will remain active until you cancel it on PayPal.":"Canceled, Songsterr plus will be active till the end of the last paid month."),c(d,{id:"doneCancelation",href:"/a/wa/account"})),s=this.state.next?t:e;return c(p,{title:"Cancel Subscription",id:this.props.id},c(i,null,s))}});export{f as default};
//# sourceMappingURL=SubscriptionPanel.2aae1ece.js.map
