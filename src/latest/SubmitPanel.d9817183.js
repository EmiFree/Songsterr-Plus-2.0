import{g as e,y as t,v as a,i as r,m as i,A as s}from"./preact.f8a34c73.js";import{w as o}from"./Panel.4e04b14d.js";import{u as n,p as l,L as u,_ as p,a7 as c,a3 as d,bE as m}from"./index.3637aaf7.js";import{d as f}from"./Input.4b13d914.js";import{w as b}from"./FileInput.6e253ba2.js";import{p as g,v as h,i as k,x as v}from"./FormError.ba736668.js";import{n as w}from"./ActionButton.e7edc72b.js";import{e as x}from"./Stub.d042d44f.js";const V={actions:"Bv92k3",notice:"Bv92se"},C=()=>{const{dispatch:e,user:t}=n("user"),o=r(),l=r(),u=r(),p=t.isAdmin,c=p?".gp3, .gp4, .gp5, .gpx, .gp":".gp3, .gp4, .gp5",[x,C]=i(!1),[H,N]=i(null),y=s((t=>{t.preventDefault();const a=new d;return(async(t,a,r,i)=>{C(!0),N(null);try{const s=g(p);h([{field:t,validator:k},{field:a,validator:k},{field:r,validator:s}]);const o={file:r.files[0],title:a.value,artist:t.value,difficulty:"Intermediate"};await m(e,o,i)}catch(t){console.error(t),N(t)}C(!1)})(o.current,l.current,u.current,a.signal),a.abort.bind(a)}),[o,l,u]);return a("form",{noValidate:!0,className:V.form,onSubmit:y,action:""},a(v,{error:H}),a(f,{type:"text",label:"Artist",ref:o,name:"artist",error:H}),a(f,{type:"text",label:"Title",ref:l,name:"title",error:H}),a("p",{className:V.notice,"aria-label":"requirements"},"To create a tab you'll need to either buy ",a("a",{href:"https://www.guitar-pro.com/en/index.php",rel:"noopener noreferrer",target:"_blank"},"Guitar Pro")," software or use a free ",a("a",{href:"https://sourceforge.net/projects/tuxguitar",rel:"noopener noreferrer",target:"_blank"},"TuxGuitar")," alternative."),a("p",{className:V.notice,"aria-label":"instructions"},"We only support Guitar Pro 3, 4, and 5 files at the moment. ","If you have a Guitar Pro 6/7+ (.gpx, .gp) file, please export it to a Guitar Pro 5 file format first.",a("br",null),a("a",{href:"https://www.guitar-pro.com/en/index.php",rel:"noopener noreferrer",target:"_blank"},"Guitar Pro"),": File → Export → GP5",a("br",null),a("a",{href:"https://sourceforge.net/projects/tuxguitar",rel:"noopener noreferrer",target:"_blank"},"TuxGuitar"),": File → Save As → Guitar Pro 5"),a(b,{id:"tabFile",accept:c,label:"Guitar Pro Tab",ref:u,name:"file",error:H,isDropFileAvailable:!0,isNewFormats:p}),a("div",{className:V.actions},a(w,{id:"submitTab",title:"Submit",processing:x})))};function H(){return a("svg",{width:189,height:105,viewBox:"0 0 189 105"},a("path",{d:"M62 39C63.1046 39 64 38.1046 64 37C64 35.8954 63.1046 35 62 35V39ZM127 35C125.895 35 125 35.8954 125 37C125 38.1046 125.895 39 127 39V35ZM185 38V102H189V38H185ZM186 101H3V105H186V101ZM4 102V38H0V102H4ZM3 39H62V35H3V39ZM127 39H186V35H127V39ZM3 101C3.55228 101 4 101.448 4 102H0C0 103.657 1.34316 105 3 105V101ZM185 102C185 101.448 185.448 101 186 101V105C187.657 105 189 103.657 189 102H185ZM189 38C189 36.3431 187.657 35 186 35V39C185.448 39 185 38.5523 185 38H189ZM4 38C4 38.5523 3.55228 39 3 39V35C1.34315 35 0 36.3431 0 38H4Z",fill:"#3A3A3A"}),a("path",{d:"M92.5 68C92.5 69.1046 93.3954 70 94.5 70C95.6046 70 96.5 69.1046 96.5 68H92.5ZM95.9142 1.08579C95.1332 0.304738 93.8668 0.304738 93.0858 1.08579L80.3579 13.8137C79.5768 14.5948 79.5768 15.8611 80.3579 16.6421C81.1389 17.4232 82.4052 17.4232 83.1863 16.6421L94.5 5.32843L105.814 16.6421C106.595 17.4232 107.861 17.4232 108.642 16.6421C109.423 15.8611 109.423 14.5948 108.642 13.8137L95.9142 1.08579ZM96.5 68V2.5H92.5V68H96.5Z",fill:"#3A3A3A"}))}const N=e((e=>{const{dispatch:r,uploads:i,user:s}=n("uploads","user"),{song:d,songSubmitted:m,songError:f}=i,{isLoggedIn:b}=s,g=!b,h=b&&!d,k=b&&d&&!f,v=k&&!m,w=k&&m;return t((()=>r("upload/reset")),[]),a(o,{title:"Submit Tab",id:e.id},g&&a(x,{id:"submit",header:"Have a tab to share?",icon:()=>a(H,null),hint:()=>a("span",{},"Please ",a(u,{to:"/a/wa/signin?next=submit","data-link":"signin"},"sign up")," for free to submit your tab.")}),h&&a("section",{className:"Bkk227","data-section":"submit"},a("h4",{className:"Bkk4b"},"Have a tab to share?",a("br",null),"Upload it in Guitar Pro format and fill in the fields below."),a("div",null,a("p",{className:"Bkk1g9"},"Your tab will appear on the site in a few minutes and we'll send you an email with a link to it."),a(C,null))),v&&a("section",{className:"Bkk227","data-section":"duplicate"},a("h4",{className:"Bkk4b"},"Submitted song already exists on Songsterr."),a("div",null,a("p",{className:"Bkk1g9"},"If you feel that you have a better version, please submit it via Upload New Revision button on existing song's page."),a(u,{className:p.buttonGreen,to:c(d)},"View existing song"))),w&&a("section",{className:"Bkk227","data-section":"success"},a("h4",{className:"Bkk4b"},"Thanks for contributing to Songsterr!"),a("div",null,a("p",{className:"Bkk1g9"},"We are processing your tab and will redirect to it as soon as possible."),a("div",null,a(l,{fill:"#777",width:25,height:20})))))}));export{N as default};
//# sourceMappingURL=SubmitPanel.d9817183.js.map
