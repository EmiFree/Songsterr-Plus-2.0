import{H as e,I as t,bT as r,bH as s,L as a,_ as i}from"./index.3637aaf7.js";import{a as o,p as n,v as l}from"./preact.f8a34c73.js";import{n as p}from"./ActionButton.e7edc72b.js";import{d as c,i as m,B as d}from"./Input.4b13d914.js";import{v as h,f as u,l as f,h as g,d as b,x as v,y}from"./FormError.ba736668.js";import{w}from"./Panel.4e04b14d.js";import{p as x}from"./user.804c31aa.js";const S={title:"Bd1qw",section:"Bdx7",sectionSignup:"Bdx7 Bd2qd",actions:"Bd10y",terms:d+" Bd1dh",termsLabel:"Bd33j"};var j=e(class extends o{constructor(e){super(e),t(this,"name",n()),t(this,"email",n()),t(this,"password",n()),t(this,"terms",n()),t(this,"handleCreate",(async e=>{e.preventDefault();const t=this.name.current,s=this.email.current,a=this.password.current,i=this.terms.current;try{h([{field:t,validator:u},{field:s,validator:f},{field:a,validator:g},{field:i,validator:b}]),this.setState({processing:!0,error:null});const e=await x(t.value,s.value,a.value);this.props.dispatch("user/signUp",e),this.setState({processing:!1,error:null}),this.props.dispatch("navigate",r(this.props.query.next))}catch(e){this.setState({processing:!1,error:e})}})),this.state={error:null,processing:!1}}render(){s();const e=this.props.query.next,t=e?`?next=${encodeURIComponent(e)}`:"",{error:r,processing:o}=this.state;return l(w,{title:"Sign Up",id:this.props.id},l("section",{className:S.sectionSignup,"data-section":"signup"},l("h2",{className:S.title},"Sign up for a free Songsterr Account"),l("form",{noValidate:!0,onSubmit:this.handleCreate,action:""},l(v,{error:r}),l(c,{ref:this.name,name:"name",type:"text",label:"Name",error:r,autocomplete:"name"}),l(c,{ref:this.email,name:"email",type:"email",label:"Email",error:r,autocomplete:"email"}),l(c,{ref:this.password,name:"password",type:"password",label:"Password",error:r,autocomplete:"new-password"}),l(m,{name:"terms",errorMessage:r&&y(r,"terms")}),l("label",{className:S.terms},l("input",{ref:this.terms,name:"terms",type:"checkbox"})," I agree to the ",l("a",{href:"/a/wa/terms",target:"_blank",rel:"license"},"Terms")," and ",l("a",{href:"/a/wa/privacy",target:"_blank",rel:"privacy"},"Privacy policy"),"."),l("div",{className:S.actions},l(p,{id:"signup",title:"Create an account",processing:o}),l(a,{to:"/a/wa/signin"+t,className:i.buttonLinkFloat,rel:"prev"},"Cancel")))))}},"query");export{j as default};
//# sourceMappingURL=SignupPanel.b422c712.js.map
