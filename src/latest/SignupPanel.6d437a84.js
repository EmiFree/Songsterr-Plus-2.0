import{d as e,y as t,h as s}from"./preact.272910a2.js";import{N as a,b_ as r,bK as i,L as o,_ as l}from"./index.b0563877.js";import{A as n}from"./ActionButton.3e8facf6.js";import{f as p,I as m,a as c}from"./Input.d3dc4ead.js";import{v as h,b as u,e as d,p as f,t as g,F as v,g as y}from"./FormError.15baa318.js";import{P as b}from"./Panel.d80d9593.js";import{d as S}from"./user.9b07dcdf.js";let x="Bd1qw",N="Bdx7",$="Bdx7 Bd2qd",w="Bd10y",A=p+" Bd1dh",_="Bd33j",q={title:"Bd1qw",section:"Bdx7",sectionSignup:"Bdx7 Bd2qd",actions:"Bd10y",terms:p+" Bd1dh",termsLabel:"Bd33j"};class L extends e{name=t();email=t();password=t();terms=t();constructor(e){super(e),this.state={error:null,processing:!1}}handleCreate=async e=>{e.preventDefault();let t=this.name.current,s=this.email.current,a=this.password.current,i=this.terms.current;try{h([{field:t,validator:u},{field:s,validator:d},{field:a,validator:f},{field:i,validator:g},]),this.setState({processing:!0,error:null});let o=await S(t.value,s.value,a.value);this.props.dispatch("user/signUp",o),this.setState({processing:!1,error:null}),this.props.dispatch("navigate",r(this.props.query))}catch(l){this.setState({processing:!1,error:l})}};render(){i();let e=Object.keys(this.props.query).length?`?${new URLSearchParams(this.props.query)}`:"",{error:t,processing:a}=this.state;return s(b,{title:"Sign Up",id:this.props.id},s("section",{className:q.sectionSignup,"data-section":"signup"},s("h2",{className:q.title},"Sign up for a free Songsterr Account"),s("form",{noValidate:!0,onSubmit:this.handleCreate,action:""},s(v,{error:t}),s(m,{ref:this.name,name:"name",type:"text",label:"Name",error:t,autocomplete:"name"}),s(m,{ref:this.email,name:"email",type:"email",label:"Email",error:t,autocomplete:"email"}),s(m,{ref:this.password,name:"password",type:"password",label:"Password",error:t,autocomplete:"new-password"}),s(c,{name:"terms",errorMessage:t&&y(t,"terms")}),s("label",{className:q.terms},s("input",{ref:this.terms,name:"terms",type:"checkbox"}),"\xa0I agree to the\xa0",s("a",{href:"/a/wa/terms",target:"_blank",rel:"license"},"Terms"),"\xa0and\xa0",s("a",{href:"/a/wa/privacy",target:"_blank",rel:"privacy"},"Privacy policy"),"."),s("div",{className:q.actions},s(n,{id:"signup",title:"Create an account",processing:a}),s(o,{to:"/a/wa/signin"+e,className:l.buttonLinkFloat,rel:"prev"},"Cancel")))))}}var k=a(L,"query");export{k as default}