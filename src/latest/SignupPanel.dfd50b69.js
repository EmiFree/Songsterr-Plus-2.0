import{d as e,e as a,a as t}from"./preact.3d326435.js";import{w as s,R as r,bN as n,bO as i,c5 as l,c7 as o,c4 as c,k as u,bM as p,Q as m,ba as d,L as g,f as h}from"./index.c64a48b4.js";import{A as f}from"./ActionButton.3cab06c5.js";import{f as x,I as S,a as b}from"./Input.33ac2f73.js";import{P as y}from"./Panel.7e25754f.js";import{d as w}from"./user.0e209c5e.js";let title="Bd1qw",section="Bdx7",sectionSignup="Bdx7 Bd2qd",actions="Bd10y",terms=x+" Bd1dh",termsLabel="Bd33j",__default={title:"Bd1qw",section:"Bdx7",sectionSignup:"Bdx7 Bd2qd",actions:"Bd10y",terms:x+" Bd1dh",termsLabel:"Bd33j"};var de={translations:{"":{"\xa0and\xa0":[" und\xa0"],"\xa0I agree to the\xa0":[" Ich stimme dem die\xa0"],Cancel:["Abbrechen"],"Create an account":["Konto erstellen"],Email:["E-Mail"],Name:["Name"],Password:["Passwort"],"Privacy policy":["Datenschutzbestimmungen"],"Sign Up":["Registrieren"],"Sign up for a free Songsterr Account":["Registrieren Sie sich f\xfcr ein kostenloses Songsterr-Konto"],Terms:["Bedingungen"]}},language:"de",pluralForms:"nplurals=2; plural=(n != 1);"},es=null,fr={translations:{"":{"\xa0and\xa0":["\xa0et\xa0"],"\xa0I agree to the\xa0":["\xa0J'accepte les\xa0"],Cancel:["Annuler"],"Create an account":["Cr\xe9er un compte"],Email:["Courriel"],Name:["Nom"],Password:["Mot de passe"],"Privacy policy":["la Politique de confidentialit\xe9"],"Sign Up":["S'inscrire"],"Sign up for a free Songsterr Account":["S'inscrire pour un compte Songsterr gratuit"],Terms:["Conditions"]}},language:"fr",pluralForms:"nplurals=2; plural=(n > 1);"},it=null,ja=null,ko=null,pt=null,ru=null,zh=null,locales=[de,es,fr,it,ja,ko,pt,ru,zh];class SignupPanel extends e{name=a();email=a();password=a();terms=a();constructor(e){super(e),this.state={error:null,processing:!1}}handleCreate=async e=>{e.preventDefault();let a=this.name.current,t=this.email.current,s=this.password.current,u=this.terms.current;try{r([{field:a,validator:n},{field:t,validator:i},{field:s,validator:l},{field:u,validator:o}]),this.setState({processing:!0,error:null});let e=await w(a.value,t.value,s.value);this.props.dispatch("user/signUp",e),this.setState({processing:!1,error:null}),this.props.dispatch("navigate",c(this.props.query))}catch(e){this.setState({processing:!1,error:e})}};render(){let{gettext:e}=u(locales);p();let a=Object.keys(this.props.query).length?`?${new URLSearchParams(this.props.query)}`:"",{error:s,processing:r}=this.state;return t(y,{title:e("Sign Up"),id:this.props.id},t("section",{className:__default.sectionSignup,"data-section":"signup"},t("h2",{className:__default.title},e("Sign up for a free Songsterr Account")),t("form",{noValidate:!0,onSubmit:this.handleCreate,action:""},t(m,{error:s}),t(S,{ref:this.name,name:"name",type:"text",label:e("Name"),error:s,autocomplete:"name"}),t(S,{ref:this.email,name:"email",type:"email",label:e("Email"),error:s,autocomplete:"email"}),t(S,{ref:this.password,name:"password",type:"password",label:e("Password"),error:s,autocomplete:"new-password"}),t(b,{name:"terms",errorMessage:s&&d(s,"terms")}),t("label",{className:__default.terms},t("input",{ref:this.terms,name:"terms",type:"checkbox"}),e("\xa0I agree to the\xa0"),t("a",{href:"/a/wa/terms",target:"_blank",rel:"license"},e("Terms")),e("\xa0and\xa0"),t("a",{href:"/a/wa/privacy",target:"_blank",rel:"privacy"},e("Privacy policy")),"."),t("div",{className:__default.actions},t(f,{id:"signup",title:e("Create an account"),processing:r}),t(g,{to:"/a/wa/signin"+a,className:h.buttonLinkFloat,rel:"prev"},e("Cancel"))))))}}var SignupPanel$1=s(SignupPanel,"query");export{SignupPanel$1 as default};
