import{d as e,e as a,a as t}from"./preact.bf58aca5.js";import{w as s,R as r,bP as i,bQ as l,c7 as n,c9 as o,c6 as c,k as p,bO as u,Q as d,bd as m,L as f,f as h}from"./index.e8b15340.js";import{A as g}from"./ActionButton.45f3bd1f.js";import{f as b,I as x,a as S}from"./Input.bba300bf.js";import{P as y}from"./Panel.98ba2c65.js";import{d as v}from"./user.b43c7f25.js";let title="Bd1qw",section="Bdx7",sectionSignup="Bdx7 Bd2qd",actions="Bd10y",terms=b+" Bd1dh",termsLabel="Bd33j",__default={title:"Bd1qw",section:"Bdx7",sectionSignup:"Bdx7 Bd2qd",actions:"Bd10y",terms:b+" Bd1dh",termsLabel:"Bd33j"};var de=null,es=null,fr={translations:{"":{"\xa0and\xa0":["\xa0et\xa0"],"\xa0I agree to the\xa0":["\xa0J'accepte les\xa0"],Cancel:["Annuler"],"Create an account":["Cr\xe9er un compte"],Email:["Courriel"],Name:["Nom"],Password:["Mot de passe"],"Privacy policy":["la Politique de confidentialit\xe9"],"Sign Up":["S'inscrire"],"Sign up for a free Songsterr Account":["S'inscrire pour un compte Songsterr gratuit"],Terms:["Conditions"]}},language:"fr",pluralForms:"nplurals=2; plural=(n > 1);"},it=null,ja=null,ko=null,pt=null,ru=null,zh=null,locales=[de,es,fr,it,ja,ko,pt,ru,zh];class SignupPanel extends e{name=a();email=a();password=a();terms=a();constructor(e){super(e),this.state={error:null,processing:!1}}handleCreate=async e=>{e.preventDefault();let a=this.name.current,t=this.email.current,s=this.password.current,p=this.terms.current;try{r([{field:a,validator:i},{field:t,validator:l},{field:s,validator:n},{field:p,validator:o}]),this.setState({processing:!0,error:null});let u=await v(a.value,t.value,s.value);this.props.dispatch("user/signUp",u),this.setState({processing:!1,error:null}),this.props.dispatch("navigate",c(this.props.query))}catch(d){this.setState({processing:!1,error:d})}};render(){let{gettext:e}=p(locales);u();let a=Object.keys(this.props.query).length?`?${new URLSearchParams(this.props.query)}`:"",{error:s,processing:r}=this.state;return t(y,{title:e("Sign Up"),id:this.props.id},t("section",{className:__default.sectionSignup,"data-section":"signup"},t("h2",{className:__default.title},e("Sign up for a free Songsterr Account")),t("form",{noValidate:!0,onSubmit:this.handleCreate,action:""},t(d,{error:s}),t(x,{ref:this.name,name:"name",type:"text",label:e("Name"),error:s,autocomplete:"name"}),t(x,{ref:this.email,name:"email",type:"email",label:e("Email"),error:s,autocomplete:"email"}),t(x,{ref:this.password,name:"password",type:"password",label:e("Password"),error:s,autocomplete:"new-password"}),t(S,{name:"terms",errorMessage:s&&m(s,"terms")}),t("label",{className:__default.terms},t("input",{ref:this.terms,name:"terms",type:"checkbox"}),e("\xa0I agree to the\xa0"),t("a",{href:"/a/wa/terms",target:"_blank",rel:"license"},e("Terms")),e("\xa0and\xa0"),t("a",{href:"/a/wa/privacy",target:"_blank",rel:"privacy"},e("Privacy policy")),"."),t("div",{className:__default.actions},t(g,{id:"signup",title:e("Create an account"),processing:r}),t(f,{to:"/a/wa/signin"+a,className:h.buttonLinkFloat,rel:"prev"},e("Cancel"))))))}}var SignupPanel$1=s(SignupPanel,"query");export{SignupPanel$1 as default};
