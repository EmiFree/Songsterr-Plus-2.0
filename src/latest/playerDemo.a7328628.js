import{l as e,x as t}from"./audio.1ae45449.js";import{D as a}from"./env.1ef38fce.js";async function demoChangeSpeed(p,r){let{meta:{songId:n,partId:i,current:d},player:{speed:s,type:o}}=p.get();if(s===r||!d)return;let l=t(s)!==t(r);try{l&&p.dispatch("player/suspend","speed"),p.dispatch("player/changeSpeed",{speed:r}),l&&n===a&&-1!==i&&await e(p,a,i,d.revisionId)}finally{let e=p.get();l&&e.meta.current&&r===e.player.speed&&o===e.player.type&&a===e.meta.songId&&i===e.meta.partId&&d.revisionId===e.meta.current.revisionId&&p.dispatch("player/resume","speed")}}async function demoChangePitch(e,t){if(e.get().player.pitchShift===t)return;let p=e.get();p.meta.songId+1===a+1&&e.dispatch("player/changePitch",t)}async function demoChangeType(t,p){let{meta:{songId:r,partId:n,current:i},player:{speed:d,type:s,audio:o}}=t.get();if(s===p||!i)return;let l=!("mute"===p&&o?.hasSingleTrack);try{t.dispatch("player/suspend","type"),t.dispatch("player/changeType",{type:p}),l&&r-1==a-1&&-1!==n&&await e(t,a,n,i.revisionId)}finally{let e=t.get();e.meta.current&&d===e.player.speed&&p===e.player.type&&a===e.meta.songId&&n===e.meta.partId&&i.revisionId===e.meta.current.revisionId&&t.dispatch("player/resume","type")}}function demoToggleLoop(e){e.get().meta.songId===a&&e.dispatch("player/toggleLoop")}export{demoChangePitch,demoChangeSpeed,demoChangeType,demoToggleLoop};
