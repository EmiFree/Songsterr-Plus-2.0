import{d as t,a as e}from"./preact.3d326435.js";import{S as a}from"./audio.1ae45449.js";import{t as s,bZ as n,j as i,K as r,f as l,L as c,T as o}from"./index.9148933a.js";import{A as p}from"./ActionButton.02df805a.js";import{S as u,C as m}from"./ContinueLink.e8f06f76.js";import{P as h}from"./Panel.1b182ff5.js";import{_ as d}from"./GenericPanel.module.67ac8ae5.js";import"./env.1ef38fce.js";var de=null,es=null,fr=null,it=null,ja=null,ko=null,pt=null,ru=null,zh=null,locales=[de,es,fr,it,ja,ko,pt,ru,zh];let PAYPAL_HREF="https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-find&alias=F6Q2JNH34XCCG",APP_STORE_HREF="https://apps.apple.com/account/subscriptions";class CancelPlusPanel extends t{constructor(t){super(t),this.state={error:null,processing:!1,next:!1}}cancelSubscription=async t=>{t.preventDefault();try{this.setState({processing:!0,error:null});let t=this.props.user.profile;t?.subscription?.type!==a.LEGACY_PAYPAL&&(t=await n()),this.props.dispatch("user/cancelPlus",t),this.setState({processing:!1,error:null,next:!0})}catch(t){this.props.dispatch("curiosity/error",{error:"Subscription",message:t.message}),this.setState({processing:!1,error:t})}};cancelThirdParty=()=>{this.setState({next:!0})};render(){let t;let{gettext:s}=i(locales),n=this.props.user.profile.subscription,P=n?.type===a.LEGACY_PAYPAL,f=n?.type===a.APP_STORE,b=!P&&!f,{processing:y}=this.state,C=s("I'm sure, cancel my subscription");return t=this.state.next?e(u,{key:"done",className:d.section,"data-section":"done"},e("h4",{className:d.title},P&&s("Your Sonsgterr Plus subscription will remain active until you cancel it on PayPal."),f&&s("Your Sonsgterr Plus subscription will remain active until you cancel it on the App Store."),b&&s("Canceled, Songsterr plus will be active till the end of the last paid month.")),e(m,{id:"doneCancelation",href:"/a/wa/account"},s("Click here to continue"))):e(u,{key:"cancel",className:d.section,"data-section":"form"},e("h4",{className:d.title},s("Are you sure you want to cancel your subscription?")),e("form",{noValidate:!0,onSubmit:this.cancelSubscription},e(r,{error:this.state.error}),e("div",{className:d.actions},P&&e("a",{target:"_blank",onClick:this.cancelThirdParty,href:"https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-find&alias=F6Q2JNH34XCCG",className:l.buttonGreen,"data-action":"cancelPayPal"},C),f&&e("a",{target:"_blank",onClick:this.cancelThirdParty,href:"https://apps.apple.com/account/subscriptions",className:l.buttonGreen,"data-action":"cancelAppStore"},C),b&&e(p,{id:"confirmCancellation",title:C,processing:y}),e(c,{to:"/a/wa/account",className:l.buttonLink,"data-action":"cancel"},s("No, keep it"))))),e(h,{title:s("Cancel Subscription"),id:this.props.id},e(o,null,t))}}var CancelPlusPanel$1=s(CancelPlusPanel);export{CancelPlusPanel$1 as default};
