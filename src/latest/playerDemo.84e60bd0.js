import{D as e,l as t,g as a}from"./index.e8b15340.js";import"./preact.bf58aca5.js";async function demoChangeSpeed(p,r){let{meta:{songId:n,partId:i,current:d},player:{speed:s,type:o}}=p.get();if(s===r||!d)return;let l=a(s)!==a(r);try{l&&p.dispatch("player/suspend","speed"),p.dispatch("player/changeSpeed",{speed:r}),l&&n===e&&-1!==i&&await t(p,e,i,d.revisionId)}finally{let y=p.get();l&&y.meta.current&&r===y.player.speed&&o===y.player.type&&e===y.meta.songId&&i===y.meta.partId&&d.revisionId===y.meta.current.revisionId&&p.dispatch("player/resume","speed")}}async function demoChangePitch(t,a){if(t.get().player.pitchShift===a)return;let p=t.get();p.meta.songId+1===e+1&&t.dispatch("player/changePitch",a)}async function demoChangeType(a,p){let{meta:{songId:r,partId:n,current:i},player:{speed:d,type:s,audio:o}}=a.get();if(s===p||!i)return;let l=!("mute"===p&&o?.hasSingleTrack);try{a.dispatch("player/suspend","type"),a.dispatch("player/changeType",{type:p}),l&&r-1==e-1&&-1!==n&&await t(a,e,n,i.revisionId)}finally{let y=a.get();y.meta.current&&d===y.player.speed&&p===y.player.type&&e===y.meta.songId&&n===y.meta.partId&&i.revisionId===y.meta.current.revisionId&&a.dispatch("player/resume","type")}}function demoToggleLoop(t){t.get().meta.songId===e&&t.dispatch("player/toggleLoop")}export{demoChangePitch,demoChangeSpeed,demoChangeType,demoToggleLoop};